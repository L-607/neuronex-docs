# 数据源

数据源（Source）用于从外部系统中读取数据。NeuronEX 支持将数据源加载为三种模式：`流(Stream)`、`扫描表(Scan Table)`、`查询表(Lookup Table)`。

一般的数据源都可以选择加载为`流(Stream)`，表（包括`扫描表`和`查询表`）是保留大量的数据状态的方法，一般用来和`流(Stream)`结合应对复杂的处理场景。

:::tip 提示
在使用`规则(Rule)`时，至少有一个源必须为`流(Stream)`。
:::


## 数据源类型

目前 NeuronEX 内置以下数据源类型，以及它们支持的加载模式：

| 名称                        | 描述                                  | 流   | 扫描表 | 查询表 |
| --------------------------- | ---------------------------------- | ---- | ------ | ------ |
| [MQTT](./mqtt.md)           | 从 MQTT 主题读取数据                       | ✅    | ✅    | ❌    |
| [HTTP pull](./http_pull.md) | 从 HTTP 服务器中拉取数据                   | ✅    | ✅    | ❌    |
| [HTTP push](./http_push.md) | 通过 HTTP 推送数据到 NeuronEX              | ✅    | ✅   | ❌     |
| [内存](./memory.md)         | 从 NeuronEX 内存主题读取数据以形成规则管道 | ✅    | ✅      | ✅     |
| [Neuron](./neuron.md)       | 从NeuronEX的数采引擎模块读取数据           | ✅    | ✅      |❌    |
| [文件](./file.md)           | 从文件中读取数据                           | ✅    | ✅    | ❌    |
| [SQL](./sql.md)         | 从数据库中查询数据                        | ✅    | ✅      | ✅|
| [Video](./video.md)         | 从视频流中查询数据                        | ✅    | ✅   | ❌    |


## 定义和运行

在 NeuronEX 中，在**源管理**页面创建了流或者表之后，实际上只是创建了一个数据源的逻辑定义而非真正物理运行的数据输入。只有当使用了该数据源的规则启动之后，数据流才会真正运行。

:::tip 提示
在**源管理**页面创建的流或者表，可在多个规则的 SQL 的 `from` 子句中使用。
:::

用户可以在创建数据源(Source)时通过指定`共享(SHARED)`字段来定义是否共享数据源。


## 数据源解码

用户可以在创建数据源(Source)时通过指定`流格式`字段来定义解码方式。当前支持 `json`、 `binary`、`protobuf`、`delimited`，如希望使用自定义格式，也可以选择 `custom`。

## 数据结构

NeuronEX 支持带结构/无结构的流，默认为无结构。用户无需定义任何形式的 schema，主要用于弱结构化数据流，或数据结构经常变化的情况。

- 无结构的流 

Schemaless，用户无需定义任何形式的 schema，主要用于弱结构化数据流，或数据结构经常变化的情况。

- 带结构的流

用户在 source 层定义 schema，多用于弱类型的编码方式，例如最常用的 JSON。适用于用户的数据有固定或大致固定的格式，同时不想使用强类型的数据编解码格式。


:::tip 提示
部分数据格式本身带有数据结构，例如 `protobuf` 格式。用户在创建源时可以定义 `流格式` 来指向模式注册表 ( Schema Registry ) 中的数据结构定义。此时，数据源的数据结构将会被模式注册表中的定义覆盖。有关模式的详细介绍，查阅 [模式](./config.md#模式) 章节。
:::


